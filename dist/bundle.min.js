!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.streamy=e()}}(function(){return function e(n,r,t){function i(o,a){if(!r[o]){if(!n[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(u)return u(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var d=r[o]={exports:{}};n[o][0].call(d.exports,function(e){var r=n[o][1][e];return i(r?r:e)},d,d.exports,e,n,r,t)}return r[o].exports}for(var u="function"==typeof require&&require,o=0;o<t.length;o++)i(t[o]);return i}({1:[function(e,n){"use strict";function r(e,n){if(n&&!Array.isArray(n))throw new TypeError("Expected sequence to be an Array");n=n||[];var r={array:e||[],sequence:n,chunk:{size:0,position:0}};r.appendOperation=i.bind(r);var s=function(e){return t(Array.isArray(e)?{array:e,sequence:r.sequence,chunk:{size:0,position:0}}:r)};return Object.defineProperty(s,"apply",{value:function(e){return r.array==e?s:(r.array=e,r.chunk={size:0,position:0},s)}}),Object.defineProperty(s,"chunk",{value:function(e){return r.chunk.size=e,t(r)}}),Object.defineProperty(s,"walk",{value:function(){return"reduce"===r.sequence[r.sequence.length-1][0]?s.chunk(1):s.chunk(1)[0]}}),Object.defineProperty(s,Symbol.iterator,{value:function(){return{next:function(){return r.chunk.position==r.array.length?{done:!0}:{done:!1,value:s.walk(1)}}}}}),Object.defineProperty(s,"filter",{value:i.bind(r,"filter")}),Object.defineProperty(s,"forEach",{value:i.bind(r,"forEach")}),Object.defineProperty(s,"map",{value:i.bind(r,"map")}),Object.defineProperty(s,"reduce",{value:r.appendOperation.bind(r,"reduce")}),Object.defineProperty(s,"every",{value:a.bind(r)}),Object.defineProperty(s,"find",{value:c.bind(r)}),Object.defineProperty(s,"findIndex",{value:f.bind(r)}),Object.defineProperty(s,"join",{value:d.bind(r)}),Object.defineProperty(s,"some",{value:p.bind(r)}),Object.defineProperty(s,"fill",{value:u.bind(r)}),Object.defineProperty(s,"slice",{value:o.bind(r)}),s}function t(e){function n(){b=v&&!0}var r,t,i,u,o,a,c,f,d=e.array,p=d.length,s=e.sequence,l=s.length,h=[],y=!1,b=!1,v=!0,k=0,O=0;for(e.chunk.size&&e.chunk.position!=p?(c=e.chunk.accumulate,f=e.chunk.stageIndex||[],k=e.chunk.position||0):(e.chunk.position=0,f=[]),k;p>k&&(r=d[k],t=!1,!e.chunk.size||"undefined"==typeof f[l-1]||e.chunk.position+e.chunk.size!=f[l-1]+1);++k){for(O=0;l>O;++O)switch(f[O]=void 0===f[O]?-1:f[O],f[O]+=1,i=s[O][0],u=s[O][1],o=s[O][2],a=s[O][3],i){case"filter":u.call(o,r,f[O],n)||(t=!0,O=l);break;case"forEach":v=!1,u.call(o,r,f[O],n);break;case"map":r=u.call(o,r,f[O],n);break;case"reduce":if(t=!0,y=!0,0===f[O]){if(a.length<3){c=r;break}c=o}c=u(c,r,f[O],n),O=l}if(t||h.push(r),b)break}return e.chunk.size=0,e.chunk.position=k,e.chunk.accumulate=c,e.chunk.stageIndex=f,y?c:h}function i(e,n,t){if("reduce"===e&&arguments.length<3&&0==this.array.length)throw new TypeError("Reduce of empty array with no initial value");if(this.sequence.length&&"reduce"===this.sequence[this.sequence.length-1][0])throw new TypeError("Non-iterable stages are not chainable");var i=this.sequence.slice();return i.push([e,n,t,arguments]),r(this.array,i)}function u(e,n,r){return n=n||0,r=r||this.array.length,this.appendOperation("map",function(t,i){return i>=n&&r>i?e:t})}function o(e,n){return e=e||0,this.appendOperation("filter",function(r,t,i){return t===n&&i(),t>=e&&(!n||n>t)})}function a(e){return this.appendOperation("reduce",function(n,r,t){return n&&e(r,t)},!0)}function c(e){return this.appendOperation("reduce",function(n,r,t,i){return void 0!==n?n:e(r,t)?(i(),r):void 0},void 0)}function f(e){return this.appendOperation("reduce",function(n,r,t,i){return n>-1?n:e(r,t,array)?(i(),t):-1},-1)}function d(e){return e=void 0===e?",":String(e),this.appendOperation("reduce",function(n,r){return n+e+r})}function p(e){return this.appendOperation("reduce",function(n,r,t,i){return e(r,t)?(i(),!0):n||!1},!1)}n.exports=r},{}]},{},[1])(1)});