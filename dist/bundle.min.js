!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.streamy=e()}}(function(){return function e(n,r,t){function i(o,c){if(!r[o]){if(!n[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(u)return u(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var d=r[o]={exports:{}};n[o][0].call(d.exports,function(e){var r=n[o][1][e];return i(r?r:e)},d,d.exports,e,n,r,t)}return r[o].exports}for(var u="function"==typeof require&&require,o=0;o<t.length;o++)i(t[o]);return i}({1:[function(e,n){"use strict";n.exports=function(e){function n(){b=v&&!0}var r,t,i,u,o,c,a,f,d=e.array,p=d.length,s=e.sequence,l=s.length,h=[],y=!1,b=!1,v=!0,O=0,k=0;for(e.chunk.size&&e.chunk.position!=p?(a=e.chunk.accumulate,f=e.chunk.stageIndex||[],O=e.chunk.position||0):(e.chunk.position=0,f=[]),O;p>O&&(r=d[O],t=!1,!e.chunk.size||"undefined"==typeof f[l-1]||e.chunk.position+e.chunk.size!=f[l-1]+1);++O){for(k=0;l>k;++k)switch(f[k]=void 0===f[k]?-1:f[k],f[k]+=1,i=s[k][0],u=s[k][1],o=s[k][2],c=s[k][3],i){case"filter":u.call(o,r,f[k],n)||(t=!0,k=l);break;case"forEach":v=!1,u.call(o,r,f[k],n);break;case"map":r=u.call(o,r,f[k],n);break;case"reduce":if(t=!0,y=!0,0===f[k]){if(c.length<3){a=r;break}a=o}a=u(a,r,f[k],n),k=l}if(t||h.push(r),b)break}return e.chunk.size=0,e.chunk.position=O,e.chunk.accumulate=a,e.chunk.stageIndex=f,y?a:h}},{}],2:[function(e,n){n.exports={fillMap:function(e,n,r){return n=n||0,r=r||this.array.length,this.appendOperation("map",function(t,i){return i>=n&&r>i?e:t})},sliceFilter:function(e,n){return e=e||0,this.appendOperation("filter",function(r,t,i){return t===n&&i(),t>=e&&(!n||n>t)})},everyReduce:function(e){return this.appendOperation("reduce",function(n,r,t){return n&&e(r,t)},!0)},findReduce:function(e){return this.appendOperation("reduce",function(n,r,t,i){return void 0!==n?n:e(r,t)?(i(),r):void 0},void 0)},findIndexReduce:function(e){return this.appendOperation("reduce",function(n,r,t,i){return n>-1?n:e(r,t,array)?(i(),t):-1},-1)},joinReduce:function(e){return e=void 0===e?",":String(e),this.appendOperation("reduce",function(n,r){return n+e+r})},someReduce:function(e){return this.appendOperation("reduce",function(n,r,t,i){return e(r,t)?(i(),!0):n||!1},!1)}}},{}],3:[function(e,n){"use strict";function r(e,n){if(n&&!Array.isArray(n))throw new TypeError("Expected sequence to be an Array");n=n||[];var r={array:e||[],sequence:n,chunk:{size:0,position:0}};r.appendOperation=t.bind(r);var o=function(e){return i(Array.isArray(e)?{array:e,sequence:r.sequence,chunk:{size:0,position:0}}:r)};return Object.defineProperty(o,"apply",{value:function(e){return r.array==e?o:(r.array=e,r.chunk={size:0,position:0},o)}}),Object.defineProperty(o,"chunk",{value:function(e){return r.chunk.size=e,i(r)}}),Object.defineProperty(o,"walk",{value:function(){return"reduce"===r.sequence[r.sequence.length-1][0]?o.chunk(1):o.chunk(1)[0]}}),Object.defineProperty(o,Symbol.iterator,{value:function(){return{next:function(){return r.chunk.position==r.array.length?{done:!0}:{done:!1,value:o.walk(1)}}}}}),Object.defineProperty(o,"filter",{value:t.bind(r,"filter")}),Object.defineProperty(o,"forEach",{value:t.bind(r,"forEach")}),Object.defineProperty(o,"map",{value:t.bind(r,"map")}),Object.defineProperty(o,"reduce",{value:r.appendOperation.bind(r,"reduce")}),Object.defineProperty(o,"every",{value:u.everyReduce.bind(r)}),Object.defineProperty(o,"find",{value:u.findReduce.bind(r)}),Object.defineProperty(o,"findIndex",{value:u.findIndexReduce.bind(r)}),Object.defineProperty(o,"join",{value:u.joinReduce.bind(r)}),Object.defineProperty(o,"some",{value:u.someReduce.bind(r)}),Object.defineProperty(o,"fill",{value:u.fillMap.bind(r)}),Object.defineProperty(o,"slice",{value:u.sliceFilter.bind(r)}),o}function t(e,n,t){if("reduce"===e&&arguments.length<3&&0==this.array.length)throw new TypeError("Reduce of empty array with no initial value");if(this.sequence.length&&"reduce"===this.sequence[this.sequence.length-1][0])throw new TypeError("Non-iterable stages are not chainable");var i=this.sequence.slice();return i.push([e,n,t,arguments]),r(this.array,i)}var i=e("./executor"),u=e("./pseudoOperations");n.exports=r},{"./executor":1,"./pseudoOperations":2}]},{},[3])(3)});