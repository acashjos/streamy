!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.streamy=e()}}(function(){return function e(n,r,t){function i(u,c){if(!r[u]){if(!n[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=r[u]={exports:{}};n[u][0].call(s.exports,function(e){var r=n[u][1][e];return i(r?r:e)},s,s.exports,e,n,r,t)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<t.length;u++)i(t[u]);return i}({1:[function(e,n){"use strict";n.exports=function(e){var n,r,t,i,o,u,c,a,f=e.array,s=f.length,d=e.sequence,p=d.length-1,h=[],l=!!e.hasReduce,y=!1,b=1,v=0,k=0,O=s;if(e.hasReduce&&!e.hasReduceInit&&!s)throw new TypeError("reduce of empty array with no initial value");e.chunk.size?(c=e.chunk.accumulate,a=e.chunk.stageIndex||[],v=e.chunk.position||0,O=e.chunk.size+(e.chunk.skip||0)):a=[],e.reverse?(b=-1,v=v>=s?s-1:v):v=0>v?0:v;var w=e.hasForEach?function(){}:function(){y=!0};for(v;s>v&&O&&v>=0;v+=b){for(n=f[v],r=!1,k=0;p>=k;++k)switch(a[k]=void 0===a[k]?-1:a[k],a[k]+=b,t=d[k][0],i=d[k][1],o=d[k][2],u=d[k][3],t){case"filter":i.call(o,n,a[k],w)||(r=!0,O++,k=p);break;case"forEach":i.call(o,n,a[k],w);break;case"map":n=i.call(o,n,a[k],w);break;case"reduce":if(r=!0,0===a[k]){if(u.length<3){c=n;break}c=o}c=i(c,n,a[k],w),k=p}if(O--,!(e.chunk.size&&O>=e.chunk.size)&&(r||l||h.push(n),y))break}return e.chunk.size?(e.chunk.position=v,e.chunk.accumulate=c,e.chunk.stageIndex=a):e.chunk={size:0,position:0},e.chunk.size=0,e.reverse=!1,l?c:h}},{}],2:[function(e,n){"use strict";n.exports={fillMap:function(e,n,r){return n=n||0,r=r||this.array.length,this.appendOperation("map",function(t,i){return i>=n&&r>i?e:t})},everyReduce:function(e){return this.appendOperation("reduce",function(n,r,t){return n&&e(r,t)},!0)},findReduce:function(e){return this.appendOperation("reduce",function(n,r,t,i){return void 0!==n?n:e(r,t)?(i(),r):void 0},void 0)},findIndexReduce:function(e){return this.appendOperation("reduce",function(n,r,t,i){return n>-1?n:e(r,t)?(i(),t):-1},-1)},joinReduce:function(e){return e=void 0===e?",":String(e),this.appendOperation("reduce",function(n,r){return n+e+r})},someReduce:function(e){return this.appendOperation("reduce",function(n,r,t,i){return e(r,t)?(i(),!0):n||!1},!1)}}},{}],3:[function(e,n){"use strict";function r(e,n){if(n&&!Array.isArray(n))throw new TypeError("Expected sequence to be an Array");var r=new i(e,n);r.appendOperation=t.bind(r);var a=function(e){return u(Array.isArray(e)?new i(e,r.sequence):r)};return Object.defineProperty(a,"apply",{value:function(e){if(!Array.isArray(e))throw new TypeError(".apply() expected an array. got "+("undefined"==typeof e?"undefined":o(e)));return r.array==e?a:(r.array=e,r.chunk={size:0,position:-1},a)}}),Object.defineProperty(a,"chunk",{value:function(e,n){if(0>e){if(r.hasReduce)throw new TypeError("Reverse iteration not supported with reduce");r.reverse=!0}return r.chunk.size=Math.abs(e),r.chunk.skip=n||0,u(r)}}),Object.defineProperty(a,"isMoving",{value:function(){return r.chunk.position<r.array.length&&r.chunk.position>=0}}),Object.defineProperty(a,"fromZero",{value:function(){return r.chunk.position=0}}),Object.defineProperty(a,"walk",{value:function(e){if(0>e){if(r.hasReduce)throw new TypeError("Reverse iteration not supported with reduce");r.reverse=!0}return r.chunk.size=1,r.hasReduce?u(r):u(r)[0]}}),Object.defineProperty(a,Symbol.iterator,{value:function(){return{next:function(){return r.chunk.position<r.array.length?{done:!1,value:a.walk()}:{done:!0}}}}}),Object.defineProperty(a,"filter",{value:t.bind(r,"filter")}),Object.defineProperty(a,"forEach",{value:t.bind(r,"forEach")}),Object.defineProperty(a,"map",{value:t.bind(r,"map")}),Object.defineProperty(a,"reduce",{value:r.appendOperation.bind(r,"reduce")}),Object.defineProperty(a,"every",{value:c.everyReduce.bind(r)}),Object.defineProperty(a,"find",{value:c.findReduce.bind(r)}),Object.defineProperty(a,"findIndex",{value:c.findIndexReduce.bind(r)}),Object.defineProperty(a,"join",{value:c.joinReduce.bind(r)}),Object.defineProperty(a,"some",{value:c.someReduce.bind(r)}),Object.defineProperty(a,"fill",{value:c.fillMap.bind(r)}),a}function t(e,n,t){if(this.sequence.length&&"reduce"===this.sequence[this.sequence.length-1][0])throw new TypeError("Non-iterable stages are not chainable");var i=this.sequence.slice();return i.push([e,n,t,arguments]),r(this.array,i)}function i(e,n){var r=this;this.array=e||[],this.sequence=n||[],this.chunk={size:0,position:-1},this.hasReduce=!1,this.hasForEach=!1,this.sequence.forEach(function(e){switch(e[0]){case"reduce":r.hasReduce=!0,r.hasReduceInit=e[3].length>=3;break;case"forEach":r.hasForEach=!0}})}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=e("./executor"),c=e("./pseudoOperations");n.exports=r},{"./executor":1,"./pseudoOperations":2}]},{},[3])(3)});